<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Introduction to Data Exploration and Analysis with R</title>
  <meta name="description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook.">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Introduction to Data Exploration and Analysis with R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="github-repo" content="MikeMahoney218/LectureBook" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Introduction to Data Exploration and Analysis with R" />
  
  <meta name="twitter:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

<meta name="author" content="Michael Mahoney">


<meta name="date" content="2018-10-29">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="introductory-data-analysis.html">
<link rel="next" href="more-complicated-analyses.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome to IDEAR</a></li>
<li class="chapter" data-level="1" data-path="unit-one-introduction-to-r-and-data-visualization.html"><a href="unit-one-introduction-to-r-and-data-visualization.html"><i class="fa fa-check"></i><b>1</b> Unit One: Introduction to R and Data Visualization</a><ul>
<li class="chapter" data-level="1.1" data-path="unit-one-introduction-to-r-and-data-visualization.html"><a href="unit-one-introduction-to-r-and-data-visualization.html#lecture-notes"><i class="fa fa-check"></i><b>1.1</b> Lecture Notes</a><ul>
<li class="chapter" data-level="1.1.1" data-path="unit-one-introduction-to-r-and-data-visualization.html"><a href="unit-one-introduction-to-r-and-data-visualization.html#what-is-r"><i class="fa fa-check"></i><b>1.1.1</b> What is R?</a></li>
<li class="chapter" data-level="1.1.2" data-path="unit-one-introduction-to-r-and-data-visualization.html"><a href="unit-one-introduction-to-r-and-data-visualization.html#what-is-coding"><i class="fa fa-check"></i><b>1.1.2</b> What is coding?</a></li>
<li class="chapter" data-level="1.1.3" data-path="unit-one-introduction-to-r-and-data-visualization.html"><a href="unit-one-introduction-to-r-and-data-visualization.html#conventions-of-the-course-and-this-reader"><i class="fa fa-check"></i><b>1.1.3</b> Conventions of the course (and this reader)</a></li>
<li class="chapter" data-level="1.1.4" data-path="unit-one-introduction-to-r-and-data-visualization.html"><a href="unit-one-introduction-to-r-and-data-visualization.html#things-youll-need"><i class="fa fa-check"></i><b>1.1.4</b> Things You’ll Need</a></li>
<li class="chapter" data-level="1.1.5" data-path="unit-one-introduction-to-r-and-data-visualization.html"><a href="unit-one-introduction-to-r-and-data-visualization.html#introduction-to-rstudio"><i class="fa fa-check"></i><b>1.1.5</b> Introduction to RStudio</a></li>
<li class="chapter" data-level="1.1.6" data-path="unit-one-introduction-to-r-and-data-visualization.html"><a href="unit-one-introduction-to-r-and-data-visualization.html#your-first-program"><i class="fa fa-check"></i><b>1.1.6</b> Your First Program</a></li>
<li class="chapter" data-level="1.1.7" data-path="unit-one-introduction-to-r-and-data-visualization.html"><a href="unit-one-introduction-to-r-and-data-visualization.html#the-iris-dataset"><i class="fa fa-check"></i><b>1.1.7</b> The iris Dataset</a></li>
<li class="chapter" data-level="1.1.8" data-path="unit-one-introduction-to-r-and-data-visualization.html"><a href="unit-one-introduction-to-r-and-data-visualization.html#graphing-with-r"><i class="fa fa-check"></i><b>1.1.8</b> Graphing with R</a></li>
<li class="chapter" data-level="1.1.9" data-path="unit-one-introduction-to-r-and-data-visualization.html"><a href="unit-one-introduction-to-r-and-data-visualization.html#the-tidyverse-package"><i class="fa fa-check"></i><b>1.1.9</b> The Tidyverse Package</a></li>
<li class="chapter" data-level="1.1.10" data-path="unit-one-introduction-to-r-and-data-visualization.html"><a href="unit-one-introduction-to-r-and-data-visualization.html#ggplot2"><i class="fa fa-check"></i><b>1.1.10</b> ggplot2</a></li>
<li class="chapter" data-level="1.1.11" data-path="unit-one-introduction-to-r-and-data-visualization.html"><a href="unit-one-introduction-to-r-and-data-visualization.html#facetting"><i class="fa fa-check"></i><b>1.1.11</b> Facetting</a></li>
<li class="chapter" data-level="1.1.12" data-path="unit-one-introduction-to-r-and-data-visualization.html"><a href="unit-one-introduction-to-r-and-data-visualization.html#diamonds"><i class="fa fa-check"></i><b>1.1.12</b> diamonds</a></li>
<li class="chapter" data-level="1.1.13" data-path="unit-one-introduction-to-r-and-data-visualization.html"><a href="unit-one-introduction-to-r-and-data-visualization.html#other-popular-geoms"><i class="fa fa-check"></i><b>1.1.13</b> Other Popular Geoms</a></li>
<li class="chapter" data-level="1.1.14" data-path="unit-one-introduction-to-r-and-data-visualization.html"><a href="unit-one-introduction-to-r-and-data-visualization.html#designing-good-graphics"><i class="fa fa-check"></i><b>1.1.14</b> Designing Good Graphics</a></li>
<li class="chapter" data-level="1.1.15" data-path="unit-one-introduction-to-r-and-data-visualization.html"><a href="unit-one-introduction-to-r-and-data-visualization.html#saving-your-graphics"><i class="fa fa-check"></i><b>1.1.15</b> Saving Your Graphics</a></li>
<li class="chapter" data-level="1.1.16" data-path="unit-one-introduction-to-r-and-data-visualization.html"><a href="unit-one-introduction-to-r-and-data-visualization.html#more-resources"><i class="fa fa-check"></i><b>1.1.16</b> More Resources</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="unit-one-introduction-to-r-and-data-visualization.html"><a href="unit-one-introduction-to-r-and-data-visualization.html#exercises"><i class="fa fa-check"></i><b>1.2</b> Exercises</a><ul>
<li class="chapter" data-level="1.2.1" data-path="unit-one-introduction-to-r-and-data-visualization.html"><a href="unit-one-introduction-to-r-and-data-visualization.html#calculate-the-following"><i class="fa fa-check"></i><b>1.2.1</b> Calculate the following:</a></li>
<li class="chapter" data-level="1.2.2" data-path="unit-one-introduction-to-r-and-data-visualization.html"><a href="unit-one-introduction-to-r-and-data-visualization.html#graph-the-following"><i class="fa fa-check"></i><b>1.2.2</b> Graph the following:</a></li>
<li class="chapter" data-level="1.2.3" data-path="unit-one-introduction-to-r-and-data-visualization.html"><a href="unit-one-introduction-to-r-and-data-visualization.html#use-a-new-dataset"><i class="fa fa-check"></i><b>1.2.3</b> Use a new dataset:</a></li>
<li class="chapter" data-level="1.2.4" data-path="unit-one-introduction-to-r-and-data-visualization.html"><a href="unit-one-introduction-to-r-and-data-visualization.html#looking-ahead"><i class="fa fa-check"></i><b>1.2.4</b> Looking ahead:</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="unit-2-r-functions-and-workflow.html"><a href="unit-2-r-functions-and-workflow.html"><i class="fa fa-check"></i><b>2</b> Unit 2: R Functions and Workflow</a><ul>
<li class="chapter" data-level="2.1" data-path="unit-2-r-functions-and-workflow.html"><a href="unit-2-r-functions-and-workflow.html#workflow"><i class="fa fa-check"></i><b>2.1</b> Workflow</a><ul>
<li class="chapter" data-level="2.1.1" data-path="unit-2-r-functions-and-workflow.html"><a href="unit-2-r-functions-and-workflow.html#scripts"><i class="fa fa-check"></i><b>2.1.1</b> Scripts</a></li>
<li class="chapter" data-level="2.1.2" data-path="unit-2-r-functions-and-workflow.html"><a href="unit-2-r-functions-and-workflow.html#notebooks"><i class="fa fa-check"></i><b>2.1.2</b> Notebooks</a></li>
<li class="chapter" data-level="2.1.3" data-path="unit-2-r-functions-and-workflow.html"><a href="unit-2-r-functions-and-workflow.html#memory-objects-and-names"><i class="fa fa-check"></i><b>2.1.3</b> Memory, Objects, and Names</a></li>
<li class="chapter" data-level="2.1.4" data-path="unit-2-r-functions-and-workflow.html"><a href="unit-2-r-functions-and-workflow.html#dataframes-and-transformations"><i class="fa fa-check"></i><b>2.1.4</b> Dataframes and Transformations</a></li>
<li class="chapter" data-level="2.1.5" data-path="unit-2-r-functions-and-workflow.html"><a href="unit-2-r-functions-and-workflow.html#the-pipe"><i class="fa fa-check"></i><b>2.1.5</b> The Pipe</a></li>
<li class="chapter" data-level="2.1.6" data-path="unit-2-r-functions-and-workflow.html"><a href="unit-2-r-functions-and-workflow.html#data-transformations"><i class="fa fa-check"></i><b>2.1.6</b> Data Transformations</a></li>
<li class="chapter" data-level="2.1.7" data-path="unit-2-r-functions-and-workflow.html"><a href="unit-2-r-functions-and-workflow.html#working-with-groups"><i class="fa fa-check"></i><b>2.1.7</b> Working with Groups</a></li>
<li class="chapter" data-level="2.1.8" data-path="unit-2-r-functions-and-workflow.html"><a href="unit-2-r-functions-and-workflow.html#missing-values"><i class="fa fa-check"></i><b>2.1.8</b> Missing Values</a></li>
<li class="chapter" data-level="2.1.9" data-path="unit-2-r-functions-and-workflow.html"><a href="unit-2-r-functions-and-workflow.html#count-data"><i class="fa fa-check"></i><b>2.1.9</b> Count Data</a></li>
<li class="chapter" data-level="2.1.10" data-path="unit-2-r-functions-and-workflow.html"><a href="unit-2-r-functions-and-workflow.html#oddballs"><i class="fa fa-check"></i><b>2.1.10</b> Oddballs</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="unit-2-r-functions-and-workflow.html"><a href="unit-2-r-functions-and-workflow.html#r-functions-and-workflow-exercises"><i class="fa fa-check"></i><b>2.2</b> R Functions and Workflow Exercises</a><ul>
<li class="chapter" data-level="2.2.1" data-path="unit-2-r-functions-and-workflow.html"><a href="unit-2-r-functions-and-workflow.html#do-the-following"><i class="fa fa-check"></i><b>2.2.1</b> Do the following:</a></li>
<li class="chapter" data-level="2.2.2" data-path="unit-2-r-functions-and-workflow.html"><a href="unit-2-r-functions-and-workflow.html#work-with-other-datasets"><i class="fa fa-check"></i><b>2.2.2</b> Work with other datasets:</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="basic-statistics-using-r.html"><a href="basic-statistics-using-r.html"><i class="fa fa-check"></i><b>3</b> Basic Statistics (Using R)</a><ul>
<li class="chapter" data-level="3.1" data-path="basic-statistics-using-r.html"><a href="basic-statistics-using-r.html#purpose-of-the-unit"><i class="fa fa-check"></i><b>3.1</b> Purpose of the Unit</a></li>
<li class="chapter" data-level="3.2" data-path="basic-statistics-using-r.html"><a href="basic-statistics-using-r.html#definitions"><i class="fa fa-check"></i><b>3.2</b> Definitions</a><ul>
<li class="chapter" data-level="3.2.1" data-path="basic-statistics-using-r.html"><a href="basic-statistics-using-r.html#data-concepts"><i class="fa fa-check"></i><b>3.2.1</b> Data Concepts</a></li>
<li class="chapter" data-level="3.2.2" data-path="basic-statistics-using-r.html"><a href="basic-statistics-using-r.html#statistical-terms"><i class="fa fa-check"></i><b>3.2.2</b> Statistical Terms</a></li>
<li class="chapter" data-level="3.2.3" data-path="basic-statistics-using-r.html"><a href="basic-statistics-using-r.html#models-and-tests"><i class="fa fa-check"></i><b>3.2.3</b> Models and Tests</a></li>
<li class="chapter" data-level="3.2.4" data-path="basic-statistics-using-r.html"><a href="basic-statistics-using-r.html#how-well-compare-models"><i class="fa fa-check"></i><b>3.2.4</b> How We’ll Compare Models</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="basic-statistics-using-r.html"><a href="basic-statistics-using-r.html#examples"><i class="fa fa-check"></i><b>3.3</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="introductory-data-analysis.html"><a href="introductory-data-analysis.html"><i class="fa fa-check"></i><b>4</b> Introductory Data Analysis</a><ul>
<li class="chapter" data-level="4.1" data-path="introductory-data-analysis.html"><a href="introductory-data-analysis.html#exploratory-data-analysis"><i class="fa fa-check"></i><b>4.1</b> Exploratory Data Analysis</a><ul>
<li class="chapter" data-level="4.1.1" data-path="introductory-data-analysis.html"><a href="introductory-data-analysis.html#gapminder"><i class="fa fa-check"></i><b>4.1.1</b> gapminder</a></li>
<li class="chapter" data-level="4.1.2" data-path="introductory-data-analysis.html"><a href="introductory-data-analysis.html#describing-your-data"><i class="fa fa-check"></i><b>4.1.2</b> Describing Your Data</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="introductory-data-analysis.html"><a href="introductory-data-analysis.html#statistical-tests-and-regressions"><i class="fa fa-check"></i><b>4.2</b> Statistical Tests and Regressions</a></li>
<li class="chapter" data-level="4.3" data-path="introductory-data-analysis.html"><a href="introductory-data-analysis.html#functional-programming"><i class="fa fa-check"></i><b>4.3</b> Functional Programming</a><ul>
<li class="chapter" data-level="4.3.1" data-path="introductory-data-analysis.html"><a href="introductory-data-analysis.html#column-names"><i class="fa fa-check"></i><b>4.3.1</b> Column Names</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="introductory-data-analysis.html"><a href="introductory-data-analysis.html#modeling"><i class="fa fa-check"></i><b>4.4</b> Modeling</a></li>
<li class="chapter" data-level="4.5" data-path="introductory-data-analysis.html"><a href="introductory-data-analysis.html#mixed-models"><i class="fa fa-check"></i><b>4.5</b> Mixed Models</a></li>
<li class="chapter" data-level="4.6" data-path="introductory-data-analysis.html"><a href="introductory-data-analysis.html#conclusion"><i class="fa fa-check"></i><b>4.6</b> Conclusion</a></li>
<li class="chapter" data-level="4.7" data-path="introductory-data-analysis.html"><a href="introductory-data-analysis.html#exercises-1"><i class="fa fa-check"></i><b>4.7</b> Exercises</a><ul>
<li class="chapter" data-level="4.7.1" data-path="introductory-data-analysis.html"><a href="introductory-data-analysis.html#answer-the-following"><i class="fa fa-check"></i><b>4.7.1</b> Answer the following:</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="functions-and-scripting.html"><a href="functions-and-scripting.html"><i class="fa fa-check"></i><b>5</b> Functions and Scripting</a><ul>
<li class="chapter" data-level="5.1" data-path="functions-and-scripting.html"><a href="functions-and-scripting.html#work-in-progress"><i class="fa fa-check"></i><b>5.1</b> Work in Progress</a></li>
<li class="chapter" data-level="5.2" data-path="functions-and-scripting.html"><a href="functions-and-scripting.html#writing-functions"><i class="fa fa-check"></i><b>5.2</b> Writing Functions</a><ul>
<li class="chapter" data-level="5.2.1" data-path="functions-and-scripting.html"><a href="functions-and-scripting.html#our-first-function"><i class="fa fa-check"></i><b>5.2.1</b> Our First Function</a></li>
<li class="chapter" data-level="5.2.2" data-path="functions-and-scripting.html"><a href="functions-and-scripting.html#returns"><i class="fa fa-check"></i><b>5.2.2</b> Returns</a></li>
<li class="chapter" data-level="5.2.3" data-path="functions-and-scripting.html"><a href="functions-and-scripting.html#more-complicated-functions"><i class="fa fa-check"></i><b>5.2.3</b> More Complicated Functions</a></li>
<li class="chapter" data-level="5.2.4" data-path="functions-and-scripting.html"><a href="functions-and-scripting.html#whats-really-real"><i class="fa fa-check"></i><b>5.2.4</b> What’s Really Real?</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="functions-and-scripting.html"><a href="functions-and-scripting.html#conditional-statements"><i class="fa fa-check"></i><b>5.3</b> Conditional Statements</a><ul>
<li class="chapter" data-level="5.3.1" data-path="functions-and-scripting.html"><a href="functions-and-scripting.html#stops"><i class="fa fa-check"></i><b>5.3.1</b> Stops</a></li>
<li class="chapter" data-level="5.3.2" data-path="functions-and-scripting.html"><a href="functions-and-scripting.html#function-dependencies"><i class="fa fa-check"></i><b>5.3.2</b> Function Dependencies</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="functions-and-scripting.html"><a href="functions-and-scripting.html#saving-and-loading-functions"><i class="fa fa-check"></i><b>5.4</b> Saving and Loading Functions</a></li>
<li class="chapter" data-level="5.5" data-path="functions-and-scripting.html"><a href="functions-and-scripting.html#loops"><i class="fa fa-check"></i><b>5.5</b> Loops</a></li>
<li class="chapter" data-level="5.6" data-path="functions-and-scripting.html"><a href="functions-and-scripting.html#exercises-2"><i class="fa fa-check"></i><b>5.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="more-complicated-analyses.html"><a href="more-complicated-analyses.html"><i class="fa fa-check"></i><b>6</b> More Complicated Analyses</a><ul>
<li class="chapter" data-level="6.1" data-path="more-complicated-analyses.html"><a href="more-complicated-analyses.html#work-in-progress-1"><i class="fa fa-check"></i><b>6.1</b> Work in Progress</a></li>
<li class="chapter" data-level="6.2" data-path="more-complicated-analyses.html"><a href="more-complicated-analyses.html#other-datasets"><i class="fa fa-check"></i><b>6.2</b> Other Datasets</a><ul>
<li class="chapter" data-level="6.2.1" data-path="more-complicated-analyses.html"><a href="more-complicated-analyses.html#importing-your-own-data"><i class="fa fa-check"></i><b>6.2.1</b> Importing Your Own Data</a></li>
<li class="chapter" data-level="6.2.2" data-path="more-complicated-analyses.html"><a href="more-complicated-analyses.html#exporting-data"><i class="fa fa-check"></i><b>6.2.2</b> Exporting Data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="achieving-graphical-excellence.html"><a href="achieving-graphical-excellence.html"><i class="fa fa-check"></i><b>7</b> Achieving Graphical Excellence</a><ul>
<li class="chapter" data-level="7.1" data-path="achieving-graphical-excellence.html"><a href="achieving-graphical-excellence.html#work-in-progress-2"><i class="fa fa-check"></i><b>7.1</b> Work in Progress</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to Data Exploration and Analysis with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="functions-and-scripting" class="section level1">
<h1><span class="header-section-number">5</span> Functions and Scripting</h1>
<div id="work-in-progress" class="section level2">
<h2><span class="header-section-number">5.1</span> Work in Progress</h2>
</div>
<div id="writing-functions" class="section level2">
<h2><span class="header-section-number">5.2</span> Writing Functions</h2>
<p>By now, we’ve started understanding how to use the prebuilt functions available for us within R. However, those functions don’t cover everything that we might need to do - and so sometimes, we need to build them for ourselves.</p>
<p>At first, it might not make sense to spend your time writing functions, when you could just copy and paste the same code snippets to multiple places. But - in addition to this failing our rule that, if you have to repeat something more than twice, there’s a better way - copying and pasting increases the chance of typos, makes the important parts of your code harder to understand, and makes your script or notebook unnecessarily long. Additionally, if the needs of your project change - or you catch a mistake in your code - functions only need to be changed in one place. Plus, once we move into working with others and sharing your code, functions make cleaning data and standardizing analyses between partners much easier.</p>
<div id="our-first-function" class="section level3">
<h3><span class="header-section-number">5.2.1</span> Our First Function</h3>
<p>Some functions might seem impossibly complex - coding something like ggplot’s geoms, for instance, is probably a bit beyond us right now. But others really aren’t that hard - for instance, if we wanted to code another function to calculate the mean, our code would look like this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mean2 &lt;-<span class="st"> </span><span class="cf">function</span>(x){
  MEAN &lt;-<span class="st"> </span><span class="kw">sum</span>(x)<span class="op">/</span><span class="kw">length</span>(x)
  <span class="kw">return</span>(MEAN)
}</code></pre></div>
<p>Note if we want to run an entire chunk of code while using curly braces (<code>{}</code>), we have to run our code from the very first line - trying to run the code from the middle will only evaluate the section inside of those particular braces.</p>
<p>As you can see, there are three steps to this process:</p>
<ul>
<li>We defined the object <code>mean2()</code> as a function (using <code>function()</code>), which takes the argument <code>x</code></li>
<li>Inside the curly braces <code>{}</code>, we coded what the function should do - define <code>MEAN</code> as the sum of <code>x</code> divided by the number of elements in <code>x</code></li>
<li>We told R what our function should <code>return()</code> as an output - in this case, <code>MEAN</code></li>
</ul>
<p>This is how most functions work! While the internal code can be a lot more complicated than this, at their essence, functions are just objects that manipulate their inputs before returning an output.</p>
<p>We can compare the results of our function against base R’s <code>mean()</code>, to make sure we did alright:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(iris<span class="op">$</span>Sepal.Length)</code></pre></div>
<pre><code>## [1] 5.843333</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean2</span>(iris<span class="op">$</span>Sepal.Length)</code></pre></div>
<pre><code>## [1] 5.843333</code></pre>
<p>Not bad!</p>
</div>
<div id="returns" class="section level3">
<h3><span class="header-section-number">5.2.2</span> Returns</h3>
<p>As a quick sidenote, not all the code you’ll see in the wild will be quite as explicit about what it <code>return()</code>s. For instance, the same code will run exactly like <code>mean2()</code> did, and is a bit shorter:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mean3 &lt;-<span class="st"> </span><span class="cf">function</span>(x){
  <span class="kw">sum</span>(x)<span class="op">/</span><span class="kw">length</span>(x)
}</code></pre></div>
<p>In general, functions will return the last thing they evaluate. <code>return()</code> is typically used to stop a function early - if it fails a conditional (as we’ll discuss below) or other similar cases. I personally like being explicit about what a function returns, but most developers will let their function return values implicitly instead.</p>
</div>
<div id="more-complicated-functions" class="section level3">
<h3><span class="header-section-number">5.2.3</span> More Complicated Functions</h3>
<p>Where other functions get more complicated is in the number of arguments they take. In <code>mean2()</code>, we defined <code>x</code> as our only argument. This is the <em>data</em> argument - it tells us what dataset we should use in our function. However, plenty of functions have <em>detail</em> arguments as well - for instance, the <code>na.rm</code> argument in <code>mean()</code>, or the <code>method</code> argument in <code>cor.test()</code>. These allow us to specify exactly how our function is implemented. For instance, if we wanted to code a new function, <code>multistat()</code>, which let us run any function on a dataset <code>x</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">multistat &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">func =</span> mean){
  <span class="kw">func</span>(x)
}</code></pre></div>
<p>We could now use that function to calculate standard deviation, for instance:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">multistat</span>(iris<span class="op">$</span>Sepal.Length, sd)</code></pre></div>
<pre><code>## [1] 0.8280661</code></pre>
<p>But if we left the <code>func</code> argument blank, it would default to what it was defined as - in this case, <code>mean</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">multistat</span>(iris<span class="op">$</span>Sepal.Length)</code></pre></div>
<pre><code>## [1] 5.843333</code></pre>
<p>This is a pretty stupid reason to make a function - it doesn’t do anything that the base functions don’t, and makes your code harder to understand - but it’s good for demonstration purposes.</p>
<p>You don’t have to give your detail arguments a default value - and it’s often helpful if you don’t, as it makes you be explicit about what you want as an output. However, if you’re expecting that you - or anyone else using your function - will usually want a particular output, you can specify the default using <code>=</code> like we did above.</p>
</div>
<div id="whats-really-real" class="section level3">
<h3><span class="header-section-number">5.2.4</span> What’s Really Real?</h3>
<p>You might remember our discussion in unit 1 about why R occasionally requires quotes around things, while othertimes it doesn’t. This is what our explanation was then:</p>
<blockquote>
<p>Note the quotes around “tidyverse” when you go to install it, but <strong>not</strong> when it’s inside of <code>library()</code>. The reason for this is a little complicated - basically, you don’t use quotes for things that are inside of R’s memory, like data, functions, and packages. You use quotes for everything else.</p>
</blockquote>
<p>This is still true inside of functions, but with a twist - objects that are defined inside of functions are only defined inside of that function. For instance, even though our <code>mean</code> functions have assigned <code>Sepal.Length</code> to <code>x</code>, we can’t then call <code>mean(x)</code>. As such, there’s not as much worry about creatively naming objects created inside of functions - while your names should still be short and descriptive, they don’t need to be distinct from names that exist outside of the function.</p>
</div>
</div>
<div id="conditional-statements" class="section level2">
<h2><span class="header-section-number">5.3</span> Conditional Statements</h2>
<p>Let’s go back to our <code>mean()</code> copycat functions. Now, to be fully honest, the code for <code>mean()</code> is a little more complicated - the function checks to make sure your vector isn’t a character vector, removes NA values if specified, trims your data, and then calculates the mean. But we’ve come close with our basic functions!</p>
<p>In order to come a bit closer, we’d have to make use of something known as a <em>conditional statement</em>. In their simplest form, these statements evaluate whether or not something is true, then return the appropriate output.</p>
<p>The most basic version of a conditional is the <code>if()</code> statement. <code>if()</code> evaluates the statement inside of its parentheses, and then returns the result of whatever code is in the <code>{}</code> below it:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="cf">if</span>(<span class="ot">TRUE</span> <span class="op">==</span><span class="st"> </span><span class="dv">1</span>){
  <span class="st">&quot;Yes&quot;</span>
}</code></pre></div>
<pre><code>## [1] &quot;Yes&quot;</code></pre>
<p>Typically, you’ll see <code>if()</code> statements paired with <code>else</code> statements, which will run the code below them if the conditional statement is false. <code>else</code> statements should be surrounded by <code>{}</code> brackets for clarity. For instance:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="cf">if</span>(<span class="ot">TRUE</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span>){
  <span class="st">&quot;Yes&quot;</span>
} <span class="cf">else</span> {
  <span class="st">&quot;No&quot;</span>
}</code></pre></div>
<pre><code>## [1] &quot;No&quot;</code></pre>
<p>You can even combine the two:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="cf">if</span>(<span class="ot">TRUE</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span>){
  <span class="st">&quot;Yes&quot;</span>
} <span class="cf">else</span> <span class="cf">if</span>(<span class="ot">FALSE</span> <span class="op">==</span><span class="st"> </span><span class="dv">1</span>){
  <span class="st">&quot;Maybe&quot;</span>
} <span class="cf">else</span> {
  <span class="st">&quot;No&quot;</span>
}</code></pre></div>
<pre><code>## [1] &quot;No&quot;</code></pre>
<p>A shorter version of this format is the <code>ifelse()</code> statement, which works much like if statements in Excel - it evaluates the conditional statement, then returns the first value if the statement is true, or the second if it’s false:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ifelse</span>(<span class="ot">TRUE</span> <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">0</span>)</code></pre></div>
<pre><code>## [1] 4</code></pre>
<p>If we wanted to get closer to the <code>mean()</code> function, then, we could do something like this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mean4 &lt;-<span class="st"> </span><span class="cf">function</span>(x){
  <span class="cf">if</span>(<span class="op">!</span><span class="kw">is.numeric</span>(x)) {
    <span class="kw">return</span>(<span class="st">&quot;That&#39;s not a number!&quot;</span>)
  } <span class="cf">else</span>{
    MEAN &lt;-<span class="st"> </span><span class="kw">sum</span>(x)<span class="op">/</span><span class="kw">length</span>(x)
    <span class="kw">return</span>(MEAN) 
  }
}</code></pre></div>
<p>This function does exactly as well handling numeric values as our other functions:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean4</span>(iris<span class="op">$</span>Sepal.Length)</code></pre></div>
<pre><code>## [1] 5.843333</code></pre>
<p>But makes a bit more sense when handed other types of values:</p>
<pre><code>mean2(&quot;h&quot;)</code></pre>
<pre><code>## Error in sum(x) : invalid &#39;type&#39; (character) of argument</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean4</span>(<span class="st">&quot;h&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;That&#39;s not a number!&quot;</code></pre>
<div id="stops" class="section level3">
<h3><span class="header-section-number">5.3.1</span> Stops</h3>
<p>The proper way to handle that sort of error-catching is to use <code>stop()</code> statements. While our <code>mean4()</code> function will ID when it’s given a non-numeric dataset, it will still return a value - in this case, the string “That’s not a number!” The problem with this is that it won’t make it obvious that something’s gone wrong - it lets the mess-up be implicit, instead of explicit.</p>
<p>We can fix that by giving the error message to <code>stop()</code> instead of <code>return</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mean5 &lt;-<span class="st"> </span><span class="cf">function</span>(x){
  <span class="cf">if</span>(<span class="op">!</span><span class="kw">is.numeric</span>(x)) {
    <span class="kw">stop</span>(<span class="st">&quot;That&#39;s not a number!&quot;</span>)
  } <span class="cf">else</span>{
    MEAN &lt;-<span class="st"> </span><span class="kw">sum</span>(x)<span class="op">/</span><span class="kw">length</span>(x)
    <span class="kw">return</span>(MEAN) 
  }
}</code></pre></div>
<pre><code>mean5(&quot;h&quot;)</code></pre>
<pre><code>## Error in mean5(&quot;h&quot;) : That&#39;s not a number!</code></pre>
<p>If we think that this sort of error is worth alerting the user about, but not stopping the entire function, we can use <code>warning()</code> to generate warning messages:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mean6 &lt;-<span class="st"> </span><span class="cf">function</span>(x){
  <span class="cf">if</span>(<span class="op">!</span><span class="kw">is.numeric</span>(x)) {
    <span class="kw">warning</span>(<span class="st">&quot;That&#39;s not a number! Returning NA.&quot;</span>)
    <span class="kw">return</span>(<span class="ot">NA_real_</span>)
  } <span class="cf">else</span>{
    MEAN &lt;-<span class="st"> </span><span class="kw">sum</span>(x)<span class="op">/</span><span class="kw">length</span>(x)
    <span class="kw">return</span>(MEAN) 
  }
}
<span class="kw">mean6</span>(<span class="st">&quot;h&quot;</span>)</code></pre></div>
<pre><code>## Warning in mean6(&quot;h&quot;): That&#39;s not a number! Returning NA.</code></pre>
<pre><code>## [1] NA</code></pre>
<p>You might have noticed, by the way, that I haven’t been using descriptive object names for our <code>mean()</code> functions. That’s because it’s hard to come up with short, descriptive names for such similar objects - this is the problem that we solve with <code>%&gt;%</code> for our datasets! But still, I tripped up once or twice while writing this chapter, and accidentally called the wrong function - you should make sure you’re naming your functions much more descriptively than I am!</p>
</div>
<div id="function-dependencies" class="section level3">
<h3><span class="header-section-number">5.3.2</span> Function Dependencies</h3>
<p>As you’ve seen, we can include functions inside of our functions - and, in fact, most of the most useful functions do exactly this. In that last example, we used <code>mean()</code> and <code>sd()</code> inside of our <code>multistat()</code> function - both of which are included in base R. However, we can even use functions from other libraries if we want. For instance, we can use the <code>describe()</code> function from psych below - but note that we’re preceeding it with <code>psych::</code>, so that it’ll run even if the user doesn’t have the psych library loaded:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">summary_describe &lt;-<span class="st"> </span><span class="cf">function</span>(x){
  <span class="kw">return</span>(<span class="kw">list</span>(<span class="dt">Summary =</span> <span class="kw">summary</span>(x), <span class="dt">Describe =</span> psych<span class="op">::</span><span class="kw">describe</span>(x)))
}
<span class="kw">summary_describe</span>(iris<span class="op">$</span>Sepal.Length)</code></pre></div>
<pre><code>## $Summary
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   4.300   5.100   5.800   5.843   6.400   7.900 
## 
## $Describe
##    vars   n mean   sd median trimmed  mad min max range skew kurtosis   se
## X1    1 150 5.84 0.83    5.8    5.81 1.04 4.3 7.9   3.6 0.31    -0.61 0.07</code></pre>
<p>The problem with doing this is that if your end user doesn’t have the package installed, your function will fail out. If you want to force your users to download that package, we’d code something like this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">summary_describe &lt;-<span class="st"> </span><span class="cf">function</span>(x){
  <span class="cf">if</span>(<span class="op">!</span><span class="kw">require</span>(psych)){
    <span class="kw">install.packages</span>(<span class="st">&quot;psych&quot;</span>)
    <span class="kw">return</span>(<span class="kw">list</span>(<span class="dt">Summary =</span> <span class="kw">summary</span>(x), <span class="dt">Describe =</span> psych<span class="op">::</span><span class="kw">describe</span>(x)))
  } <span class="cf">else</span>{ 
  <span class="kw">return</span>(<span class="kw">list</span>(<span class="dt">Summary =</span> <span class="kw">summary</span>(x), <span class="dt">Describe =</span> psych<span class="op">::</span><span class="kw">describe</span>(x)))
  }
}  
<span class="kw">summary_describe</span>(iris<span class="op">$</span>Sepal.Length)</code></pre></div>
<pre><code>## Loading required package: psych</code></pre>
<pre><code>## $Summary
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   4.300   5.100   5.800   5.843   6.400   7.900 
## 
## $Describe
##    vars   n mean   sd median trimmed  mad min max range skew kurtosis   se
## X1    1 150 5.84 0.83    5.8    5.81 1.04 4.3 7.9   3.6 0.31    -0.61 0.07</code></pre>
<p>(We use <code>require()</code> in the place of <code>library()</code> here as it will generate a warning message - letting our function proceed - rather than an error. More info <a href="https://www.r-bloggers.com/difference-between-library-and-require-in-r/">here</a>.)</p>
<p>We can also require that packages be loaded in an R session, using code like this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">summary_describe &lt;-<span class="st"> </span><span class="cf">function</span>(x){
  <span class="cf">if</span>(<span class="op">!</span><span class="kw">require</span>(psych)){
    <span class="kw">install.packages</span>(<span class="st">&quot;psych&quot;</span>)
    <span class="kw">library</span>(psych)
    <span class="kw">return</span>(<span class="kw">list</span>(<span class="dt">Summary =</span> <span class="kw">summary</span>(x), <span class="dt">Describe =</span> <span class="kw">describe</span>(x)))
  } <span class="cf">else</span>{ 
  <span class="kw">return</span>(<span class="kw">list</span>(<span class="dt">Summary =</span> <span class="kw">summary</span>(x), <span class="dt">Describe =</span> <span class="kw">describe</span>(x)))
  }
}  
<span class="kw">summary_describe</span>(iris<span class="op">$</span>Sepal.Length)</code></pre></div>
<pre><code>## $Summary
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   4.300   5.100   5.800   5.843   6.400   7.900 
## 
## $Describe
##    vars   n mean   sd median trimmed  mad min max range skew kurtosis   se
## X1    1 150 5.84 0.83    5.8    5.81 1.04 4.3 7.9   3.6 0.31    -0.61 0.07</code></pre>
<p>This isn’t a great practice, though - you should only load a library inside a function if you use that library often enough that using <code>::</code> becomes impractical. Otherwise, your code becomes hard for outsiders to understand - you might understand where <code>describe()</code> comes from, but if you have a ton of packages loaded for a function, other users will have to go digging.</p>
<p>Also, make sure to be careful with how many other packages your functions depend upon - the more packages, the more chances something breaks when one of them updates!</p>
<div id="sidenote" class="section level4">
<h4><span class="header-section-number">5.3.2.1</span> Sidenote:</h4>
<p>Note that I had to use “list” in <code>summary_describe()</code> above to return more than one object - and that both objects are written with a $ in front of their name. One cool side effect of this is that I can ask R to return only one of the outputs:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary_describe</span>(iris<span class="op">$</span>Sepal.Length)<span class="op">$</span>Describe</code></pre></div>
<pre><code>##    vars   n mean   sd median trimmed  mad min max range skew kurtosis   se
## X1    1 150 5.84 0.83    5.8    5.81 1.04 4.3 7.9   3.6 0.31    -0.61 0.07</code></pre>
<p>This has some actual applications when using tidyverse functions - for instance, <code>summarise()</code> can only use single-output functions. We can get around this by doing the following:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)</code></pre></div>
<pre><code>## -- Attaching packages ------------------------------------------------------------------------ tidyverse 1.2.1 --</code></pre>
<pre><code>## v ggplot2 3.0.0     v purrr   0.2.4
## v tibble  1.4.2     v dplyr   0.7.4
## v tidyr   0.8.0     v stringr 1.3.0
## v readr   1.1.1     v forcats 0.3.0</code></pre>
<pre><code>## -- Conflicts --------------------------------------------------------------------------- tidyverse_conflicts() --
## x ggplot2::%+%()   masks psych::%+%()
## x ggplot2::alpha() masks psych::alpha()
## x dplyr::filter()  masks stats::filter()
## x dplyr::lag()     masks stats::lag()</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">iris <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(Species) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">Estimate =</span> <span class="kw">cor.test</span>(Sepal.Length, Sepal.Width)<span class="op">$</span>estimate, 
            <span class="dt">pValue =</span> <span class="kw">cor.test</span>(Sepal.Length, Sepal.Width)<span class="op">$</span>p.value)</code></pre></div>
<pre><code>## # A tibble: 3 x 3
##   Species    Estimate   pValue
##   &lt;fct&gt;         &lt;dbl&gt;    &lt;dbl&gt;
## 1 setosa        0.743 6.71e-10
## 2 versicolor    0.526 8.77e- 5
## 3 virginica     0.457 8.43e- 4</code></pre>
<p>This is another workaround to the map functions we described in unit 4. Map functions have a lot of advantages to this approach - for instance, they don’t require repeating yourself as much, and they run faster - but there’s nothing <em>wrong</em> with doing it this way. However, not all functions return lists, so you may have some challenges if you only rely on this approach.</p>
</div>
</div>
</div>
<div id="saving-and-loading-functions" class="section level2">
<h2><span class="header-section-number">5.4</span> Saving and Loading Functions</h2>
<p>If you want to use a function in multiple scripts or notebooks, you have to save it in its own <code>.r</code> file - that is, its own R script file. After doing so, you’ll be able to load the function in other scripts and notebooks using the <code>source()</code> command, with the filename (in quotes, with the extension, case sensitive) as the only argument. Once you do that, you’ll be able to use the function as normal.</p>
<p>Saving and loading functions in this way has a lot of the same benefits as writing functions in the first place - it cuts down on repetition, makes editing and debugging easier, and makes your code easier for other people to understand.</p>
</div>
<div id="loops" class="section level2">
<h2><span class="header-section-number">5.5</span> Loops</h2>
<p>You may have noticed a theme throughout this reader - repetition is bad. Repeating your code makes it easy to make mistakes, and makes it harder to edit things as needed. As such, there’s a concept in R - and most other programming languages - called looping, designed to cut down on repetitions.</p>
<p>For instance, say we had a tibble:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df1 &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">a =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>),
              <span class="dt">b =</span> <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>))</code></pre></div>
<p>If we wanted to multiply each column by 2, we could do the following:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df1<span class="op">$</span>a &lt;-<span class="st"> </span>df1<span class="op">$</span>a <span class="op">*</span><span class="st"> </span><span class="dv">2</span>
df1<span class="op">$</span>b &lt;-<span class="st"> </span>df1<span class="op">$</span>b <span class="op">*</span><span class="st"> </span><span class="dv">2</span>
df1</code></pre></div>
<pre><code>## # A tibble: 4 x 2
##       a     b
##   &lt;dbl&gt; &lt;dbl&gt;
## 1    2.    4.
## 2    2.    4.
## 3    2.    4.
## 4    2.    4.</code></pre>
<p>But as usual, we want to find a way to reduce that repetition. The best tool in R for this sort of thing is what’s known as a <em>for loop</em>, which will repeat an action a specified number of times. To complete this task, we’d write a for loop that looked something like this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df1 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">a =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>),
              <span class="dt">b =</span> <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>))

<span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(df1)){
  df1[[i]] &lt;-<span class="st"> </span>df1[[i]] <span class="op">*</span><span class="st"> </span><span class="dv">2</span>
}

df1</code></pre></div>
<pre><code>##   a b
## 1 2 4
## 2 2 4
## 3 2 4
## 4 2 4</code></pre>
<p>Alright, so let’s break that down.</p>
<p>The <code>for()</code> statement initializes the loop, telling R that we’re going to want to do something repeatedly. Inside the parentheses, the <code>i in seq_along(df1)</code> defines how many times we want to loop the code. This will make a little more sense if we see what we get from running <code>seq_along(df1)</code> by itself:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seq_along</span>(df1)</code></pre></div>
<pre><code>## [1] 1 2</code></pre>
<p><code>seq_along()</code> returns the position of each column of a dataframe or each element in a vector - so for a dataframe with <em>n</em> columns, we’ll get the output “1, 2, …, n”. While this isn’t particularly useful by itself, it becomes powerful when used to make loops.</p>
<p>The code <code>i in seq_along(df1)</code> then tells our code to repeat itself as many times as there are positions. It does this by incrementing <code>i</code> by 1 each time the code is run, with the first iteration having a value of 1. I should note that it doesn’t matter what you use to represent <code>i</code> - while <code>i</code> is extremely common, you could use almost any object name.</p>
<p>We then are able to act on each column of our dataframe by selecting it using <code>[[i]]</code>. Since <code>i</code> increases by 1 each time the code is looped, we keep selecting the next column in order, until we’re completely done with our loop.</p>
<p>If we want to make a new dataframe with our output, we have to be careful to initalize it with the proper number of columns before we start our loop - if we don’t, our code will slow down significantly.</p>
<p>Say we wanted our function to return the median of each column. Doing this the right way looks something like this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df1 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">a =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>),
              <span class="dt">b =</span> <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>))

out &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="st">&quot;numeric&quot;</span>, <span class="kw">length</span>(df1))
out[<span class="dv">1</span>] &lt;-<span class="st"> </span>df1[<span class="dv">1</span>]
<span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(df1)){
  out[[i]] &lt;-<span class="st"> </span><span class="kw">median</span>(df1[[i]])
}

out</code></pre></div>
<pre><code>## [[1]]
## [1] 1
## 
## [[2]]
## [1] 2</code></pre>
<p>By the way - you may have heard or read that for loops are extremely slow in R. That’s not true, anymore. While they’re slower than Python’s loops by a good margin, that’s because <em>everything</em> is slower than Python by a good margin - but R is pretty middle-of-the-road when it comes to loop speed.</p>
<p>That being said, most programmers in R avoid using for loops when possible. That’s both because loops <em>were</em> significantly slower in R than other languages not that long ago, but also because the nature of R makes using functions more popular and efficient than loops. But there are certain times loops are unavoidable - and we’ll be using them in the next unit!</p>
<p>For more on for loops, look at <a href="https://r4ds.had.co.nz/iteration.html#for-loops-vs.functionals">Hadley Wickham’s coverage of the subject</a>. For our purposes, we don’t have to go much further than we already have on the subject.</p>
</div>
<div id="exercises-2" class="section level2">
<h2><span class="header-section-number">5.6</span> Exercises</h2>
<ol style="list-style-type: decimal">
<li>Remember in unit 3 that there’s no standard error function in base R. Write one, naming it <code>std.err</code>.</li>
<li>Write a function that will say “Hi!” if given the input “hi”, “Bye!” if it gets the input “bye”, and “How rude!” if the input isn’t either of those.</li>
<li>Use a loop to find the mean and median of each column of this dataframe:</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">57</span>, <span class="dv">24</span>, <span class="dv">245</span>, <span class="dv">3526</span>),
                 <span class="dt">y =</span> <span class="kw">c</span>(<span class="dv">67</span>, <span class="dv">234</span>, <span class="dv">574</span>, <span class="dv">57</span>))</code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introductory-data-analysis.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="more-complicated-analyses.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
